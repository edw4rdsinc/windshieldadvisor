@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   Global Styles - Windshield Advisor
   Mobile-first with modern animations and flourishes
   ============================================================================ */

@layer base {
  :root {
    /* Color Variables */
    --color-safety-blue: 30 58 138;
    --color-accent-orange: 249 115 22;
    --color-deep-navy: 15 23 42;
    --color-success-green: 5 150 105;
    --color-warning-yellow: 245 158 11;
    --color-danger-red: 220 38 38;

    /* Spacing rhythm */
    --spacing-unit: 0.5rem; /* 8px */

    /* Animation durations */
    --duration-fast: 200ms;
    --duration-base: 300ms;
    --duration-slow: 500ms;

    /* Easing functions */
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
  }

  /* ========================================================================
     Typography Optimization
     ======================================================================== */

  html {
    /* Prevent font size adjustment on iOS */
    -webkit-text-size-adjust: 100%;

    /* Smooth scrolling for anchor links */
    scroll-behavior: smooth;

    /* Better font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-white text-deep-navy-900;
    @apply font-sans text-body-mobile md:text-body;

    /* Prevent text selection color flash */
    -webkit-tap-highlight-color: transparent;
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold text-safety-blue-800;
    @apply leading-tight;
  }

  h1 {
    @apply text-4xl md:text-5xl lg:text-6xl;
    @apply mb-4 md:mb-6;
  }

  h2 {
    @apply text-3xl md:text-4xl;
    @apply mb-3 md:mb-4;
  }

  h3 {
    @apply text-2xl md:text-3xl;
    @apply mb-2 md:mb-3;
  }

  h4 {
    @apply text-xl md:text-2xl;
    @apply mb-2;
  }

  /* Paragraphs */
  p {
    @apply mb-4 leading-relaxed;
  }

  /* Links */
  a {
    @apply text-safety-blue-800 underline decoration-2 underline-offset-2;
    @apply transition-colors duration-200;
  }

  a:hover {
    @apply text-accent-orange-500;
  }

  /* Lists */
  ul, ol {
    @apply mb-4 ml-6;
  }

  li {
    @apply mb-2;
  }

  /* Blockquotes */
  blockquote {
    @apply border-l-4 border-safety-blue-800;
    @apply bg-gray-50 p-4 md:p-6;
    @apply italic text-lg;
    @apply mb-6;
  }

  /* Code */
  code {
    @apply bg-gray-100 px-2 py-1 rounded text-sm;
    @apply font-mono;
  }

  /* Tables */
  table {
    @apply w-full border-collapse mb-6;
  }

  th {
    @apply bg-gray-100 font-semibold text-left;
    @apply p-3 border border-gray-300;
  }

  td {
    @apply p-3 border border-gray-300;
  }

  /* Forms */
  input, textarea, select {
    @apply text-base; /* Prevents zoom on iOS */
  }
}

@layer components {
  /* ========================================================================
     Button Components with Animations
     ======================================================================== */

  .btn {
    @apply inline-flex items-center justify-center gap-2;
    @apply px-6 py-3 rounded-lg font-semibold;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-4;
    @apply active:scale-95;
    @apply min-h-[44px]; /* Mobile touch target */
  }

  .btn-primary {
    @apply btn;
    @apply bg-accent-orange-500 text-white;
    @apply shadow-button hover:shadow-button-hover;
    @apply hover:bg-accent-orange-600;
    @apply focus:ring-accent-orange-500/20;
    @apply hover:-translate-y-0.5;
  }

  .btn-secondary {
    @apply btn;
    @apply bg-transparent text-safety-blue-800;
    @apply border-2 border-safety-blue-800;
    @apply hover:bg-safety-blue-800 hover:text-white;
    @apply focus:ring-safety-blue-800/20;
  }

  .btn-tertiary {
    @apply inline-flex items-center gap-2;
    @apply text-safety-blue-800 font-semibold;
    @apply underline underline-offset-2;
    @apply transition-colors duration-200;
    @apply hover:text-accent-orange-500;
  }

  .btn-lg {
    @apply px-8 py-4 text-lg;
    @apply min-h-[56px];
  }

  .btn-sm {
    @apply px-4 py-2 text-sm;
    @apply min-h-[36px];
  }

  .btn-icon {
    @apply w-10 h-10 p-0;
    @apply flex items-center justify-center;
  }

  /* ========================================================================
     Card Components with Hover Effects
     ======================================================================== */

  .card {
    @apply bg-white rounded-lg border border-gray-200;
    @apply shadow-card;
    @apply transition-all duration-300;
  }

  .card-hover {
    @apply card;
    @apply hover:shadow-card-hover;
    @apply hover:-translate-y-1;
    @apply hover:scale-[1.02];
    @apply cursor-pointer;
  }

  .card-interactive {
    @apply card-hover;
    @apply focus-within:ring-4 focus-within:ring-safety-blue-800/10;
  }

  /* ========================================================================
     Alert/Callout Components
     ======================================================================== */

  .alert {
    @apply p-4 rounded-lg;
    @apply flex items-start gap-3;
    @apply mb-4;
  }

  .alert-critical {
    @apply alert;
    @apply bg-danger-red-50 border-l-4 border-danger-red-600;
    @apply text-danger-red-900;
  }

  .alert-warning {
    @apply alert;
    @apply bg-warning-yellow-50 border-l-4 border-warning-yellow-500;
    @apply text-warning-yellow-900;
  }

  .alert-success {
    @apply alert;
    @apply bg-success-green-50 border-l-4 border-success-green-600;
    @apply text-success-green-900;
  }

  .alert-info {
    @apply alert;
    @apply bg-blue-50 border-l-4 border-safety-blue-800;
    @apply text-safety-blue-900;
  }

  /* ========================================================================
     Badge Components
     ======================================================================== */

  .badge {
    @apply inline-flex items-center gap-1;
    @apply px-3 py-1 rounded-full;
    @apply text-sm font-semibold;
    @apply transition-transform duration-200;
    @apply hover:scale-105;
  }

  .badge-primary {
    @apply badge;
    @apply bg-safety-blue-100 text-safety-blue-800;
  }

  .badge-success {
    @apply badge;
    @apply bg-success-green-100 text-success-green-800;
  }

  .badge-warning {
    @apply badge;
    @apply bg-warning-yellow-100 text-warning-yellow-800;
  }

  .badge-danger {
    @apply badge;
    @apply bg-danger-red-100 text-danger-red-800;
  }

  /* ========================================================================
     Loading States
     ======================================================================== */

  .skeleton {
    @apply bg-gray-200 rounded;
    @apply animate-pulse;
  }

  .skeleton-shimmer {
    @apply relative overflow-hidden;
    background: linear-gradient(
      90deg,
      #f1f5f9 0%,
      #e2e8f0 20%,
      #f1f5f9 40%,
      #f1f5f9 100%
    );
    background-size: 200% 100%;
    @apply animate-shimmer;
  }

  .spinner {
    @apply w-6 h-6 border-2 border-gray-300 border-t-safety-blue-800;
    @apply rounded-full;
    @apply animate-spin;
  }

  /* ========================================================================
     Form Components with Validation States
     ======================================================================== */

  .form-input {
    @apply w-full px-4 py-3 rounded-lg;
    @apply border-2 border-gray-300;
    @apply text-base; /* Prevents iOS zoom */
    @apply transition-all duration-200;
    @apply focus:border-safety-blue-800;
    @apply focus:ring-4 focus:ring-safety-blue-800/10;
    @apply focus:outline-none;
  }

  .form-input-error {
    @apply form-input;
    @apply border-danger-red-600;
    @apply bg-danger-red-50;
    @apply focus:ring-danger-red-600/10;
  }

  .form-input-success {
    @apply form-input;
    @apply border-success-green-600;
    @apply focus:ring-success-green-600/10;
  }

  .form-label {
    @apply block mb-2 font-semibold text-deep-navy-900;
  }

  .form-help {
    @apply mt-1 text-sm text-gray-600;
  }

  .form-error {
    @apply mt-1 text-sm text-danger-red-600;
    @apply flex items-center gap-1;
  }

  /* ========================================================================
     Quiz-Specific Components
     ======================================================================== */

  .quiz-option {
    @apply form-input cursor-pointer;
    @apply flex items-center gap-3;
    @apply hover:border-safety-blue-800;
    @apply hover:bg-safety-blue-50;
  }

  .quiz-option-selected {
    @apply quiz-option;
    @apply border-safety-blue-800 bg-safety-blue-50;
    @apply ring-4 ring-safety-blue-800/10;
  }

  .quiz-progress {
    @apply h-2 bg-gray-200 rounded-full overflow-hidden;
  }

  .quiz-progress-bar {
    @apply h-full bg-safety-blue-800;
    @apply transition-all duration-500 ease-out;
  }

  /* ========================================================================
     Mobile-Specific Optimizations
     ======================================================================== */

  .mobile-tap-highlight {
    @apply active:bg-gray-100;
    @apply transition-colors duration-100;
  }

  .mobile-drawer {
    @apply fixed inset-0 z-50;
    @apply transform transition-transform duration-300;
    @apply translate-x-full;
  }

  .mobile-drawer-open {
    @apply translate-x-0;
  }

  .mobile-overlay {
    @apply fixed inset-0 bg-black/50 z-40;
    @apply transition-opacity duration-300;
  }
}

@layer utilities {
  /* ========================================================================
     Animation Utilities
     ======================================================================== */

  .animate-on-scroll {
    @apply opacity-0 translate-y-8;
    @apply transition-all duration-700;
  }

  .animate-on-scroll.visible {
    @apply opacity-100 translate-y-0;
  }

  /* Stagger animations for lists */
  .stagger-animation > * {
    @apply opacity-0 translate-y-4;
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .stagger-animation > *:nth-child(1) { animation-delay: 0.1s; }
  .stagger-animation > *:nth-child(2) { animation-delay: 0.2s; }
  .stagger-animation > *:nth-child(3) { animation-delay: 0.3s; }
  .stagger-animation > *:nth-child(4) { animation-delay: 0.4s; }
  .stagger-animation > *:nth-child(5) { animation-delay: 0.5s; }
  .stagger-animation > *:nth-child(6) { animation-delay: 0.6s; }

  /* Text truncation */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Mobile-safe spacing */
  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Focus visible (keyboard only) */
  .focus-visible-only:focus {
    @apply outline-none;
  }

  .focus-visible-only:focus-visible {
    @apply ring-4 ring-accent-orange-500/50;
    @apply outline-none;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-safety-blue-800 to-accent-orange-500;
    @apply bg-clip-text text-transparent;
  }

  /* Glass morphism */
  .glass {
    @apply bg-white/80 backdrop-blur-md;
    @apply border border-white/20;
  }

  /* Smooth corners (Apple-style) */
  .smooth-corners {
    border-radius: 1.25rem;
    /* For browsers that support it */
    -webkit-mask-image: -webkit-radial-gradient(white, black);
  }
}

/* ============================================================================
   Accessibility - Reduced Motion
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================================================
   Print Styles
   ============================================================================ */

@media print {
  .no-print {
    display: none !important;
  }

  body {
    @apply text-black bg-white;
  }

  a {
    text-decoration: underline;
  }

  /* Show URLs after links */
  a[href]:after {
    content: " (" attr(href) ")";
  }
}

/* ============================================================================
   Dark Mode (Future Enhancement)
   ============================================================================ */

@media (prefers-color-scheme: dark) {
  /* Placeholder for future dark mode support */
  /* .dark:root { } */
}
